{% extends "valiance/layout.html" %}

{% block css_js %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='valiance/css/e_tamiera.css') }}">

<script>
	document.addEventListener('DOMContentLoaded', function() {
        const competitionData = [
            {
                image: "{{ url_for('static', filename='valiance/img/tamiera/l_nasyid.jpeg') }}",
                title: "Lomba Nasyid",
                link: "{{ url_for('l_nasyid') }}"
            },
            {
                image: "{{ url_for('static', filename='valiance/img/tamiera/l_cerdas_cermat.jpeg') }}",
                title: "Lomba Cerdas Cermat Islami",
                link: "{{ url_for('l_cerdas_cermat') }}"
            },
            {
                image: "{{ url_for('static', filename='valiance/img/tamiera/l_azan.jpeg') }}",
                title: "Lomba Adzan",
                link: "{{ url_for('l_azan') }}"
            },
            {
                image: "{{ url_for('static', filename='valiance/img/tamiera/l_sambung_ayat.jpeg') }}",
                title: "Lomba Sambung Ayat",
                link: "{{ url_for('l_sambung_ayat') }}"
            },
        ];
    
        const posterContainer = document.querySelector('.performance .gambar');
        if (posterContainer) {
            posterContainer.innerHTML = '';
    
            competitionData.forEach((comp, index) => {
                const container = document.createElement('div');
                // Fix: Properly add the classes
                container.className = 'image-container hidden';
            
                container.innerHTML = `
                    <img id="poster" src="${comp.image}" alt="${comp.title}">
                    <div class="overlay">
                        <h5><b>${comp.title}</b></h5>
                        <a href="${comp.link}" class="btn">Register Now</a>
                    </div>
                `;
            
                posterContainer.appendChild(container);
            });
    
            // Initialize the intersection observer after creating elements
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("show");
                    }
                });
            });
    
            // Observe all hidden elements
            const hiddenElements = document.querySelectorAll(".hidden");
            hiddenElements.forEach((el) => observer.observe(el));
        }
    });
</script>
{% endblock css_js %}

{% block title %}Pesantren Kilat{% endblock title %}

{% block main %}
<!-- Banner Section -->
<section class="banner">
    <img src="{{ url_for('static', filename='valiance/img/banner/tamiera_banner_fix.png') }}" alt="banner">
    <section class="gradient-banner"></section>
</section>

<!-- Poster -->
<section class="content second-content">
    <div class="performance">
        <h1 class="hidden">Registration</h1>
        <div class="gambar">
            
        </div>
    </div>
</section>


<!-- Footer Wave -->
<svg class="waves-footer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
    <defs>
        <filter id="waveShadow3" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="10" result="blur" />
            <feOffset in="blur" dx="0" dy="0" result="offsetBlur" />
            <feFlood flood-color="white" flood-opacity="1" result="color" />
            <feComposite in2="offsetBlur" operator="in" result="shadow" />
            <feMerge>
                <feMergeNode in="shadow" />
                <feMergeNode in="SourceGraphic" />
            </feMerge>
        </filter>
    </defs>
    <path filter="url(#waveShadow3)" 
          fill="rgb(0, 196, 0)" 
          fill-opacity="1" 
          d="M0,64L60,101.3C120,139,240,213,360,240C480,267,600,245,720,240C840,235,960,245,1080,208C1200,171,1320,85,1380,42.7L1440,0L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z">
    </path>
</svg>
{% endblock main %}